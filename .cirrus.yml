env:
# ENCRYPTED
  RCLONECONFIG_DRIVE: "ENCRYPTED[68f2f20771885b77473323c5fb966076daaf45af93fe0efc6971712b60c4ef35a81bc71e206b5d84f4b421f7e05c417d]"
  TG_TOKEN: "ENCRYPTED[4aa3050c7fb068afc4df69ad9917d1e3f6d5949a3caaca5ac46aa02ec046b4873e82d83298843226f13140aa630cc09f]"
  TG_CHAT_ID: "ENCRYPTED[9050870bcd00f3cd5e1f39e49567bff3e4aca5055538f1f3f0f4ccb5f49369fc8b71b2c268bcddfb868b910b7d383a47]"
  EMAIL: "ENCRYPTED[eb2e49b2c8ca4bd45ffc4902f4be240238f44d1aae5c0cb8544d6800080f86a4eb869516815d9eb81288a2c0f294f920]"

# FLAG
  WORKDIR: "/tmp"
  CIRRUS_CLONE_DEPTH: "1"

task:
  name: "Evolution-X Build"
  stateful: true
  timeout_in: 120m
  container:
    image: anggit86/ubuntu:22.04
    cpu: 8
    memory: 32G

  Memuat-ccache_background_script:
     - ./script/load_ccache.sh

  Repo-pribadi_script:
     - git config --global user.name "parikk"
     - git config --global user.email "$EMAIL"

  Sinkronasi-rom_script:
     - curl -s https://api.telegram.org/bot$TG_TOKEN/sendMessage -d chat_id=$TG_CHAT_ID -d text="Start sync Source"
     - ./script/sync.sh
     - curl -s https://api.telegram.org/bot$TG_TOKEN/sendMessage -d chat_id=$TG_CHAT_ID -d text="Sync Completed!"
     
  Membangun-rom_script:
     - ./script/building.sh
     
  Ccache-informasi_background_script:
     - set -e
     - export CCACHE_DIR=$WORKDIR/ccache
     - ccache -s

  Mengunggah-build_script:
     - ./script/ziping.sh
